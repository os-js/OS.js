Options +FollowSymlinks
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_URI} !^/index.html
RewriteCond %{REQUEST_URI} !^/http-bind-jabber
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ api.php [QSA,L]

# For binding to other services
<ifModule mod_proxy.c>
  <ifModule mod_proxy_http.c>
    RewriteRule http-bind-jabber/ http://localhost:5280/http-bind/ [P]
  </ifModule>
</ifModule>

<ifModule mod_headers.c>
  FileETag None
  Header unset ETag
  Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"
  Header set Pragma "no-cache"
  Header set Expires "Wed, 11 Jan 1984 05:00:00 GMT"
</ifModule>

# You can update this file manually by looking at src/mime.json
<ifModule mod_mime.c>
  AddType application/json .json

  AddType audio/aac .aac
  AddType audio/mp4 .mp4
  AddType audio/mp4 .m4a
  AddType audio/mpeg .mp1
  AddType audio/mpeg .mp2
  AddType audio/mpeg .mp3
  AddType audio/mpeg .mpg
  AddType audio/mpeg .mpeg
  AddType audio/ogg .oga
  AddType audio/ogg .ogg
  AddType audio/wav .wav
  AddType audio/webm .webm

  AddType video/mp4 .mp4
  AddType video/mp4 .m4v
  AddType video/ogg .ogv
  AddType video/webm .webm
  AddType video/x-msvideo .avi
  AddType video/x-flv .flv
  AddType video/x-matroska .mkv

  AddType text/html .html
  AddType text/xml .xml
  AddType text/css .css
  AddType application/javascript .js
  AddType application/x-python .py

  AddType text/plain .txt
  AddType text/plain .doc

  AddType osjs/playlist .oplist
  AddType osjs/document .odoc
  AddType osjs/draw .odraw
</ifModule>
